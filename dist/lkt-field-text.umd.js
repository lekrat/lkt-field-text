(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("lkt-string-tools"),require("lkt-events")):typeof define=="function"&&define.amd?define(["exports","vue","lkt-string-tools","lkt-events"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.LktFieldText={},n.Vue,n.LktStringTools,n.LktEvents))})(this,function(n,e,d,f){"use strict";var we=Object.defineProperty;var be=(n,e,d)=>e in n?we(n,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):n[e]=d;var x=(n,e,d)=>(be(n,typeof e!="symbol"?e+"":e,d),d);class u{}x(u,"customValueSlots",{}),x(u,"customEditSlots",{});const I=["data-show-ui","data-labeled"],K=["for","innerHTML"],A={key:2,class:"lkt-field-text__main"},R=["value","type","name","id","disabled","readonly","placeholder","tabindex","autocomplete","min","max","step"],H={key:3,class:"lkt-field-text__main"},U=["value","type","name","id","disabled","readonly","tabindex","autocomplete","min","max","step"],j={key:4,class:"lkt-field__state"},q=["title"],z=["title"],O=["title"],G=["title"],J=["title"],Q=["title"],W=["title","href"],X=["title","href"],Y=["innerHTML","title"],Z={key:3,class:"lkt-field__state"},ee=["title"],te={name:"LktFieldText",inheritAttrs:!1},le=e.defineComponent({...te,props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},palette:{type:String,default:""},name:{type:String,default:d.generateRandomString(16)},valid:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},readMode:{type:Boolean,default:!1},allowReadModeSwitch:{type:Boolean,default:!1},tabindex:{type:Number,default:void 0},mandatory:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},reset:{type:Boolean,default:!1},resetMessage:{type:String,default:""},mandatoryMessage:{type:String,default:""},infoMessage:{type:String,default:""},errorMessage:{type:String,default:""},showPasswordMessage:{type:String,default:""},switchEditionMessage:{type:String,default:""},min:{type:[Number,String,void 0],default:void 0},max:{type:[Number,String,void 0],default:void 0},step:{type:[Number,String],default:1},isTel:{type:Boolean,default:!1},isEmail:{type:Boolean,default:!1},isPassword:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},isNumber:{type:Boolean,default:!1},enableAutoNumberFix:{type:Boolean,default:!0},valueSlot:{type:String,default:""},editSlot:{type:String,default:""}},emits:["update:modelValue","keyup","keydown","focus","blur","click","click-info","click-error"],setup(o,{expose:p,emit:ie}){const c=ie,y=e.useSlots(),t=o,i=d.generateRandomString(16),g=e.ref(null),V=e.ref(t.modelValue),a=e.ref(t.modelValue),w=e.ref(!1),E=e.ref(!1),k=e.ref(!t.readMode),se=e.computed(()=>typeof t.valid=="function"?t.valid():t.valid),re=e.computed(()=>a.value!==V.value),M=e.computed(()=>t.reset||t.infoMessage!==""||t.errorMessage!==""||t.isPassword&&t.showPassword),_=e.computed(()=>{let l=0;return t.reset&&++l,t.infoMessage&&++l,t.isPassword&&t.showPassword&&++l,l}),de=e.computed(()=>t.resetMessage!==""?t.resetMessage:""),ue=e.computed(()=>w.value===!0?"lkt-field__hide-password-icon":"lkt-field__show-password-icon"),C=e.computed(()=>t.autocomplete===!0?"on":"off"),N=e.computed(()=>a.value!==""),b=e.computed(()=>t.isPassword&&w.value===!0?"text":t.isEmail?"email":t.isPassword?"password":t.isNumber?"number":t.isTel?"tel":t.isSearch?"search":"text"),ce=e.computed(()=>{const l=["lkt-field","lkt-field-text"];return t.palette&&l.push(`lkt-field--${t.palette}`),b&&l.push(`is-${b.value}`),re.value&&l.push("is-changed"),t.disabled&&l.push("is-disabled"),E.value&&l.push("has-focus"),_.value>0&&l.push("has-icons",`has-icons-${_.value}`),l.push(se.value?"is-valid":"is-error"),l.push(t.modelValue?"is-filled":"is-empty"),l.join(" ")}),m=e.computed(()=>typeof a.value=="number"?a.value.toString():a.value),h=e.computed(()=>typeof t.min=="string"?parseFloat(t.min):typeof t.min=="number"?t.min:!1),B=e.computed(()=>typeof t.max=="string"?parseFloat(t.max):typeof t.max=="number"?t.max:!1),T=()=>{e.nextTick(()=>{g.value&&g.value.focus()})};e.watch(()=>t.readMode,l=>k.value=!l),e.watch(()=>t.modelValue,l=>{if(t.isNumber)return ye(l);a.value=l}),e.watch(a,l=>c("update:modelValue",l));const v=()=>a.value=V.value,fe=()=>a.value,L=l=>c("keyup",l,f.createLktEvent(i,{value:a.value})),P=l=>c("keydown",l,f.createLktEvent(i,{value:a.value})),F=l=>(E.value=!0)&&c("focus",l,f.createLktEvent(i,{value:a.value})),D=l=>(E.value=!1)&&c("blur",l,f.createLktEvent(i,{value:a.value})),S=l=>c("click",l,f.createLktEvent(i,{value:a.value})),me=l=>c("click-info",l,f.createLktEvent(i,{value:a.value})),ke=l=>c("click-error",l,f.createLktEvent(i,{value:a.value})),pe=l=>w.value=!w.value,$=l=>{k.value=!k.value,k.value&&T()},ye=l=>{if(!t.enableAutoNumberFix)return!1;let r=Number(l),s=!1;return h.value!==!1&&r<h.value&&(r=h.value,s=!0),B.value!==!1&&r>B.value&&(r=B.value,s=!0),s===!0?(a.value=r,!0):!1};p({Identifier:i,reset:v,focus:T,value:fe,isMandatory:()=>t.mandatory}),v();const he=e.computed(()=>t.valueSlot!==""&&typeof u.customValueSlots[t.valueSlot]<"u"),Be=e.computed(()=>u.customValueSlots[t.valueSlot]),Se=e.computed(()=>t.editSlot!==""&&typeof u.customEditSlots[t.editSlot]<"u"),ge=e.computed(()=>u.customEditSlots[t.editSlot]);return(l,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(ce.value),"data-show-ui":M.value,"data-labeled":!e.unref(y).label},[e.unref(y).label?e.renderSlot(l.$slots,"label",{key:0}):e.createCommentVNode("",!0),e.unref(y).label?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("label",{key:1,for:e.unref(i),innerHTML:o.label},null,8,K)),k.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.unref(y).edit?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:S},[e.renderSlot(l.$slots,"edit",{value:a.value,title:m.value})])):Se.value?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:S},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(ge.value),{value:a.value,title:m.value},null,8,["value","title"]))])):o.placeholder?(e.openBlock(),e.createElementBlock("div",A,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>a.value=s),ref:s=>g.value=s,value:a.value,type:b.value,name:o.name,id:e.unref(i),disabled:o.disabled,readonly:o.readonly,placeholder:o.placeholder,tabindex:o.tabindex,autocomplete:C.value,min:h.value,max:B.value,step:o.step,onKeyup:L,onKeydown:P,onFocus:F,onBlur:D,onClick:S},null,40,R),[[e.vModelDynamic,a.value]])])):(e.openBlock(),e.createElementBlock("div",H,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r[1]||(r[1]=s=>a.value=s),ref:s=>g.value=s,value:a.value,type:b.value,name:o.name,id:e.unref(i),disabled:o.disabled,readonly:o.readonly,tabindex:o.tabindex,autocomplete:C.value,min:h.value,max:B.value,step:o.step,onKeyup:L,onKeydown:P,onFocus:F,onBlur:D,onClick:S},null,40,U),[[e.vModelDynamic,a.value]])])),M.value?(e.openBlock(),e.createElementBlock("div",j,[t.errorMessage?(e.openBlock(),e.createElementBlock("i",{key:0,class:"lkt-field__error-icon",title:t.errorMessage,onClick:ke},null,8,q)):e.createCommentVNode("",!0),t.infoMessage?(e.openBlock(),e.createElementBlock("i",{key:1,class:"lkt-field__info-icon",title:t.infoMessage,onClick:me},null,8,z)):e.createCommentVNode("",!0),t.isPassword&&t.showPassword&&N.value?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(ue.value),title:t.showPasswordMessage,onClick:pe},null,10,O)):e.createCommentVNode("",!0),t.reset&&N.value?(e.openBlock(),e.createElementBlock("i",{key:3,class:"lkt-field__reset-icon",title:de.value,onClick:v},null,8,G)):e.createCommentVNode("",!0),t.mandatory?(e.openBlock(),e.createElementBlock("i",{key:4,class:"lkt-field__mandatory-icon",title:t.mandatoryMessage},null,8,J)):e.createCommentVNode("",!0),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("i",{key:5,class:"lkt-field__edit-icon",title:t.switchEditionMessage,onClick:$},null,8,Q)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),k.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:3,class:"lkt-field-text__read",onClick:S},[e.unref(y).value?e.renderSlot(l.$slots,"value",{key:0,value:a.value,title:m.value}):he.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(Be.value),{key:1,value:a.value,title:m.value},null,8,["value","title"])):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[o.isEmail?(e.openBlock(),e.createElementBlock("a",{key:0,class:"lkt-field-text__read-value",title:m.value,href:"mail:"+a.value},e.toDisplayString(a.value),9,W)):o.isTel?(e.openBlock(),e.createElementBlock("a",{key:1,class:"lkt-field-text__read-value",title:m.value,href:"tel:"+a.value},e.toDisplayString(a.value),9,X)):(e.openBlock(),e.createElementBlock("div",{key:2,class:"lkt-field-text__read-value",innerHTML:a.value,title:m.value},null,8,Y))],64)),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("div",Z,[e.createElementVNode("i",{class:"lkt-field__edit-icon",title:t.switchEditionMessage,onClick:$},null,8,ee)])):e.createCommentVNode("",!0)]))],10,I))}}),ae=(o,p)=>(u.customValueSlots[o]=p,!0),oe=(o,p)=>(u.customEditSlots[o]=p,!0),Ee="",ne={install:o=>{o.component("lkt-field-text")===void 0&&o.component("lkt-field-text",le)}};n.default=ne,n.setTextEditSlot=oe,n.setTextValueSlot=ae,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
