(function(e,u){typeof exports=="object"&&typeof module<"u"?module.exports=u(require("vue"),require("lkt-string-tools"),require("lkt-events")):typeof define=="function"&&define.amd?define(["vue","lkt-string-tools","lkt-events"],u):(e=typeof globalThis<"u"?globalThis:e||self,e.LktFieldText=u(e.Vue,e.LktStringTools,e.LktEvents))})(this,function(e,u,d){"use strict";const P=["data-show-ui","data-labeled"],F=["for","innerHTML"],D={key:2,class:"lkt-field-text__main"},I=["value","type","name","id","disabled","readonly","placeholder","tabindex","autocomplete","min","max","step"],K=["value","type","name","id","disabled","readonly","tabindex","autocomplete","min","max","step"],$={key:2,class:"lkt-field__state"},A=["title"],R=["title"],H=["title"],U=["title"],q=["title"],j=["title"],z={key:3,class:"lkt-field-text__read"},O=["title","href"],G=["title","href"],J=["innerHTML","title"],Q={key:3,class:"lkt-field__state"},W=["title"],X={name:"LktFieldText",inheritAttrs:!1},Y=e.defineComponent({...X,props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},palette:{type:String,default:""},name:{type:String,default:u.generateRandomString(16)},valid:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},readMode:{type:Boolean,default:!1},allowReadModeSwitch:{type:Boolean,default:!1},tabindex:{type:Number,default:void 0},mandatory:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},reset:{type:Boolean,default:!1},resetMessage:{type:String,default:""},mandatoryMessage:{type:String,default:""},infoMessage:{type:String,default:""},errorMessage:{type:String,default:""},showPasswordMessage:{type:String,default:""},switchEditionMessage:{type:String,default:""},min:{type:[Number,String,void 0],default:void 0},max:{type:[Number,String,void 0],default:void 0},step:{type:[Number,String],default:1},isTel:{type:Boolean,default:!1},isEmail:{type:Boolean,default:!1},isPassword:{type:Boolean,default:!1},isSearch:{type:Boolean,default:!1},isNumber:{type:Boolean,default:!1},enableAutoNumberFix:{type:Boolean,default:!0}},emits:["update:modelValue","keyup","keydown","focus","blur","click","click-info","click-error"],setup(o,{expose:Z,emit:ee}){const r=ee,h=e.useSlots(),t=o,n=u.generateRandomString(16),k=e.ref(null),b=e.ref(t.modelValue),a=e.ref(t.modelValue),p=e.ref(!1),w=e.ref(!1),c=e.ref(!t.readMode),te=e.computed(()=>typeof t.valid=="function"?t.valid():t.valid),le=e.computed(()=>a.value!==b.value),x=e.computed(()=>t.reset||t.infoMessage!==""||t.errorMessage!==""||t.isPassword&&t.showPassword),M=e.computed(()=>{let l=0;return t.reset&&++l,t.infoMessage&&++l,t.isPassword&&t.showPassword&&++l,l}),ae=e.computed(()=>t.resetMessage!==""?t.resetMessage:""),oe=e.computed(()=>p.value===!0?"lkt-field__hide-password-icon":"lkt-field__show-password-icon"),_=e.computed(()=>t.autocomplete===!0?"on":"off"),v=e.computed(()=>a.value!==""),y=e.computed(()=>t.isPassword&&p.value===!0?"text":t.isEmail?"email":t.isPassword?"password":t.isNumber?"number":t.isTel?"tel":t.isSearch?"search":"text"),ne=e.computed(()=>{const l=["lkt-field","lkt-field-text"];return t.palette&&l.push(`lkt-field--${t.palette}`),y&&l.push(`is-${y.value}`),le.value&&l.push("is-changed"),t.disabled&&l.push("is-disabled"),w.value&&l.push("has-focus"),M.value>0&&l.push("has-icons",`has-icons-${M.value}`),l.push(te.value?"is-valid":"is-error"),l.push(t.modelValue?"is-filled":"is-empty"),l.join(" ")}),B=e.computed(()=>typeof a.value=="number"?a.value.toString():a.value),f=e.computed(()=>typeof t.min=="string"?parseFloat(t.min):typeof t.min=="number"?t.min:!1),m=e.computed(()=>typeof t.max=="string"?parseFloat(t.max):typeof t.max=="number"?t.max:!1),E=()=>{e.nextTick(()=>{k.value&&k.value.focus()})};e.watch(()=>t.readMode,l=>c.value=!l),e.watch(()=>t.modelValue,l=>{if(t.isNumber)return ue(l);a.value=l}),e.watch(a,l=>r("update:modelValue",l));const g=()=>a.value=b.value,ie=()=>a.value,V=l=>r("keyup",l,d.createLktEvent(n,{value:a.value})),S=l=>r("keydown",l,d.createLktEvent(n,{value:a.value})),C=l=>(w.value=!0)&&r("focus",l,d.createLktEvent(n,{value:a.value})),N=l=>(w.value=!1)&&r("blur",l,d.createLktEvent(n,{value:a.value})),L=l=>r("click",l,d.createLktEvent(n,{value:a.value})),se=l=>r("click-info",l,d.createLktEvent(n,{value:a.value})),re=l=>r("click-error",l,d.createLktEvent(n,{value:a.value})),de=l=>p.value=!p.value,T=l=>{c.value=!c.value,c.value&&E()},ue=l=>{if(!t.enableAutoNumberFix)return!1;let s=Number(l),i=!1;return f.value!==!1&&s<f.value&&(s=f.value,i=!0),m.value!==!1&&s>m.value&&(s=m.value,i=!0),i===!0?(a.value=s,!0):!1};return Z({Identifier:n,reset:g,focus:E,value:ie,isMandatory:()=>t.mandatory}),g(),(l,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(ne.value),"data-show-ui":x.value,"data-labeled":!e.unref(h).label},[e.unref(h).label?e.renderSlot(l.$slots,"label",{key:0}):e.createCommentVNode("",!0),e.unref(h).label?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("label",{key:1,for:e.unref(n),innerHTML:o.label},null,8,F)),c.value?(e.openBlock(),e.createElementBlock("div",D,[o.placeholder?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i),ref:i=>k.value=i,value:a.value,type:y.value,name:o.name,id:e.unref(n),disabled:o.disabled,readonly:o.readonly,placeholder:o.placeholder,tabindex:o.tabindex,autocomplete:_.value,min:f.value,max:m.value,step:o.step,onKeyup:V,onKeydown:S,onFocus:C,onBlur:N,onClick:L},null,40,I)),[[e.vModelDynamic,a.value]]):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value=i),ref:i=>k.value=i,value:a.value,type:y.value,name:o.name,id:e.unref(n),disabled:o.disabled,readonly:o.readonly,tabindex:o.tabindex,autocomplete:_.value,min:f.value,max:m.value,step:o.step,onKeyup:V,onKeydown:S,onFocus:C,onBlur:N,onClick:L},null,40,K)),[[e.vModelDynamic,a.value]]),x.value?(e.openBlock(),e.createElementBlock("div",$,[t.errorMessage?(e.openBlock(),e.createElementBlock("i",{key:0,class:"lkt-field__error-icon",title:t.errorMessage,onClick:re},null,8,A)):e.createCommentVNode("",!0),t.infoMessage?(e.openBlock(),e.createElementBlock("i",{key:1,class:"lkt-field__info-icon",title:t.infoMessage,onClick:se},null,8,R)):e.createCommentVNode("",!0),t.isPassword&&t.showPassword&&v.value?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(oe.value),title:t.showPasswordMessage,onClick:de},null,10,H)):e.createCommentVNode("",!0),t.reset&&v.value?(e.openBlock(),e.createElementBlock("i",{key:3,class:"lkt-field__reset-icon",title:ae.value,onClick:g},null,8,U)):e.createCommentVNode("",!0),t.mandatory?(e.openBlock(),e.createElementBlock("i",{key:4,class:"lkt-field__mandatory-icon",title:t.mandatoryMessage},null,8,q)):e.createCommentVNode("",!0),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("i",{key:5,class:"lkt-field__edit-icon",title:t.switchEditionMessage,onClick:T},null,8,j)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",z,[o.isEmail?(e.openBlock(),e.createElementBlock("a",{key:0,class:"lkt-field-text__read-value",title:B.value,href:"mail:"+a.value},e.toDisplayString(a.value),9,O)):o.isTel?(e.openBlock(),e.createElementBlock("a",{key:1,class:"lkt-field-text__read-value",title:B.value,href:"tel:"+a.value},e.toDisplayString(a.value),9,G)):(e.openBlock(),e.createElementBlock("div",{key:2,class:"lkt-field-text__read-value",innerHTML:a.value,title:B.value},null,8,J)),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("div",Q,[e.createElementVNode("i",{class:"lkt-field__edit-icon",title:t.switchEditionMessage,onClick:T},null,8,W)])):e.createCommentVNode("",!0)]))],10,P))}});return{install:o=>{o.component("lkt-field-text",Y)}}});
